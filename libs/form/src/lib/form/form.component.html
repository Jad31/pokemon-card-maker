<mat-progress-bar mode="determinate" [value]="step * 20"></mat-progress-bar>
<mat-accordion>
  <!-- Basic Information -->
  <mat-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title> Basic Information </mat-panel-title>
    </mat-expansion-panel-header>

    <mat-form-field appearance="fill">
      <mat-label>Name</mat-label>
      <input
        matInput
        #name
        [value]="formService.name()"
        (input)="formService.name.set(name.value)"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Type</mat-label>
      <mat-select #type (selectionChange)="formService.type.set(type.value)">
        <mat-option *ngFor="let type of formService.typeOptions" [value]="type">
          {{ type }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Stage</mat-label>
      <input
        matInput
        #stage
        [value]="formService.stage()"
        (input)="formService.stage.set(stage.value)"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Health</mat-label>
      <input
        matInput
        #health
        [value]="formService.health()"
        (input)="formService.health.set(+health.value)"
        type="number"
        min="0"
      />
    </mat-form-field>

    <!-- <mat-form-field appearance="fill">
      <mat-label>Image</mat-label>
      <input
        matInput
        #characterImage
        type="file"
        (change)="fileChangeEvent($event)"
        [value]="formService.characterImage()"
        (input)="formService.characterImage.set(characterImage.value)"
      />
    </mat-form-field> -->
    <mat-action-row>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <!-- Picture -->

  <mat-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title> Picture </mat-panel-title>
    </mat-expansion-panel-header>
    <input #characterImage type="file" (change)="fileChangeEvent($event)" />

    <image-cropper
      [imageChangedEvent]="imageChangedEvent"
      [maintainAspectRatio]="true"
      [aspectRatio]="4 / 3"
      format="png"
      (imageCropped)="imageCropped($event)"
      (imageLoaded)="imageLoaded($event)"
      (cropperReady)="cropperReady()"
      (loadImageFailed)="loadImageFailed()"
    ></image-cropper>

    <mat-action-row>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <!-- Feature One -->
  <mat-expansion-panel [expanded]="step === 2" (opened)="setStep(2)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title> Ability One </mat-panel-title>
    </mat-expansion-panel-header>

    <mat-form-field appearance="fill">
      <mat-label>Ability Name</mat-label>
      <input
        matInput
        #abilityOneName
        [value]="formService.abilityOneName()"
        (input)="formService.abilityOneName.set(abilityOneName.value)"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Description</mat-label>
      <textarea
        matInput
        #abilityOneDescription
        [value]="formService.abilityOneDescription()"
        (input)="
          formService.abilityOneDescription.set(abilityOneDescription.value)
        "
      >
      </textarea>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Cost</mat-label>
      <mat-select
        #abilityOneCost
        (selectionChange)="formService.abilityOneCost.set(abilityOneCost.value)"
      >
        <mat-option
          *ngFor="let cost of formService.abilityCostOptions"
          [value]="cost"
        >
          {{ cost }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Damage</mat-label>
      <input
        matInput
        #abilityOneDamage
        [value]="formService.abilityOneDamage()"
        (input)="formService.abilityOneDamage.set(+abilityOneDamage.value)"
        type="number"
        min="0"
      />
    </mat-form-field>
    <mat-action-row>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <!-- Feature Two -->
  <mat-expansion-panel [expanded]="step === 3" (opened)="setStep(3)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title> Ability Two </mat-panel-title>
    </mat-expansion-panel-header>

    <mat-form-field appearance="fill">
      <mat-label>Ability Name</mat-label>
      <input
        matInput
        #abilityTwoName
        [value]="formService.abilityTwoName()"
        (input)="formService.abilityTwoName.set(abilityTwoName.value)"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Description</mat-label>
      <textarea
        matInput
        #abilityTwoDescription
        [value]="formService.abilityTwoDescription()"
        (input)="
          formService.abilityTwoDescription.set(abilityTwoDescription.value)
        "
      >
      </textarea>
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Cost</mat-label>
      <mat-select
        #abilityTwoCost
        (selectionChange)="formService.abilityTwoCost.set(abilityTwoCost.value)"
      >
        <mat-option
          *ngFor="let cost of formService.abilityCostOptions"
          [value]="cost"
        >
          {{ cost }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Damage</mat-label>
      <input
        matInput
        #abilityTwoDamage
        [value]="formService.abilityTwoDamage()"
        (input)="formService.abilityTwoDamage.set(+abilityTwoDamage.value)"
        type="number"
        min="0"
      />
    </mat-form-field>
    <mat-action-row>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <!-- Location, Work Environment, Availability -->
  <mat-expansion-panel [expanded]="step === 4" (opened)="setStep(4)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title>
        Location, Work Environment, and Availability
      </mat-panel-title>
    </mat-expansion-panel-header>

    <mat-form-field appearance="fill">
      <mat-label>Location</mat-label>
      <input
        matInput
        #location
        [value]="formService.location()"
        (input)="formService.location.set(location.value)"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Work Environment</mat-label>
      <input
        matInput
        #workEnvironment
        environment
        [value]="formService.workEnvironment()"
        (input)="formService.workEnvironment.set(workEnvironment.value)"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Availability</mat-label>
      <input
        matInput
        #availability
        [value]="formService.availability()"
        (input)="formService.availability.set(availability.value)"
      />
    </mat-form-field>
    <mat-action-row>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>

  <!-- Additionals -->
  <mat-expansion-panel [expanded]="step === 5" (opened)="setStep(5)" hideToggle>
    <mat-expansion-panel-header>
      <mat-panel-title> Additional Information </mat-panel-title>
    </mat-expansion-panel-header>

    <mat-form-field appearance="fill">
      <mat-label>Upper Text</mat-label>
      <textarea
        matInput
        #upperText
        [value]="formService.upperText()"
        (input)="formService.upperText.set(upperText.value)"
      ></textarea>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Lower Text</mat-label>
      <textarea
        matInput
        #lowerText
        [value]="formService.lowerText()"
        (input)="formService.lowerText.set(lowerText.value)"
      >
      </textarea>
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Illustrator</mat-label>
      <input
        matInput
        #illustrator
        [value]="formService.illustrator()"
        (input)="formService.illustrator.set(illustrator.value)"
      />
    </mat-form-field>

    <mat-form-field appearance="fill">
      <mat-label>Company</mat-label>
      <input
        matInput
        #company
        [value]="formService.company()"
        (input)="formService.company.set(company.value)"
      />
    </mat-form-field>
    <mat-form-field appearance="fill">
      <mat-label>Card Number</mat-label>
      <input
        matInput
        #cardNumber
        [value]="formService.cardNumber()"
        (input)="formService.cardNumber.set(+cardNumber.value)"
        type="number"
        min="0"
      />
    </mat-form-field>
    <mat-action-row>
      <button mat-button color="primary" (click)="nextStep()">Next</button>
    </mat-action-row>
  </mat-expansion-panel>
</mat-accordion>
