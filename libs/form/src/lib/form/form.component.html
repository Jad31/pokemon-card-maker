
<div
  class="flex flex-col p-4 overflow-auto justify-between h-full max-h-[560px] bg-white/[0.4] backdrop-blur-sm backdrop-saturate-[100%] rounded-xl">
  <div
    class="gap-4 h-fit overflow-y-scroll">
    <!-- Basic Information -->
    <div
      class="collapse collapse-arrow px-4">
      <input type="checkbox" class="peer" />
      <div
        class="collapse-title text-xl font-medium">
        Basics
      </div>
      <div
        class="collapse-content bg-white/[0.33] rounded-md">
        <label class="label">
          <span class="label-text">Name</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #name
          [value]="store.name()"
          (input)="formFieldChange($event, 'name')" />

        <label class="label">
          <span class="label-text">Type</span>
        </label>
        <select class="select select-bordered w-full max-w-xs bg-input"
          #iconTypeOptions
          (change)="changeCardType(iconTypeOptions.value)">
          @for (type of formService.typeOptions ; track type) {
          <option [value]="type">
            {{ type | titlecase }}
          </option>
          }
        </select>
        <label class="label">
          <span class="label-text">Stage</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #stage
          [value]="store.stage()"
          (input)="formFieldChange($event, 'stage')" />
        <label class="label">
          <span class="label-text">Health</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #health
          [value]="store.health()"
          (input)="formFieldChange($event, 'health')" />
      </div>
    </div>

    <!-- Picture -->
    <div
      class="collapse collapse-arrow px-4">
      <input type="checkbox" class="peer" />
      <div
        class="collapse-title text-xl font-medium">
        Picture
      </div>
      <div
        class="collapse-content bg-white/[0.33] rounded-md">
        <input #characterImage type="file"
          class="file-input file-input-bordered mt-4 file-input-sm w-full max-w-xs bg-input"
          (change)="fileChangeEvent($event)" />

        @if (imageChangedEvent) {
        <image-cropper
          [imageChangedEvent]="imageChangedEvent"
          [maintainAspectRatio]="true"
          [aspectRatio]="381/271"
          format="png"
          (imageCropped)="imageCropped($event)"
          (imageLoaded)="imageLoaded($event)"
          (cropperReady)="cropperReady()"
          (loadImageFailed)="loadImageFailed()" />
        }
      </div>
    </div>

    <!-- Ability One -->
    <div
      class="collapse collapse-arrow px-4">
      <input type="checkbox" class="peer" />
      <div
        class="collapse-title text-xl font-medium">
        Ability One
      </div>
      <div
        class="collapse-content bg-white/[0.33] rounded-md">
        <label class="label">
          <span class="label-text">Name</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #abilityOneName
          [value]="store.abilityOneName()"
          (input)="formFieldChange($event, 'abilityOneName')" />

        <label class="label">
          <span class="label-text">Description</span>
        </label>
        <textarea
          class="textarea textarea-bordered w-full max-w-xs bg-input"
          #abilityOneDescription
          [value]="store.abilityOneDescription()"
          (input)="formFieldChange($event, 'abilityOneDescription')"></textarea>

        <label class="label">
          <span class="label-text">Type</span>
        </label>
        <div
          class="flex flex-col h-fit w-full p-2 rounded-lg border-2 border-black border-solid bg-input">
          <div
            class="flex flex-row h-[65%] flex-wrap content-start">
            @for (cost of formService.abilityTypeCostOptions; track $index) {
            <img
              class="m-1.5 w-[25px] hover:cursor-pointer"
              ngSrc="assets/{{
                    formService.abilityTypeCostOptions[$index] | lowercase
                  }}-icon.png"
              (click)="addAbilityOneCost(cost)"
              width="25"
              height="25" />
            }
            <div></div>
          </div>
          <div class="divider m-1"></div>
          <div
            class="flex h-[25px] p-1 flew-wrap items-center justify-start">
            <p>Cost:</p>
            @for (cost of store.abilityOneCost(); track
            $index)
            {
            <img
              class="m-1.5 w-[25px] hover:cursor-pointer"
              ngSrc="assets/{{
                   store.abilityOneCost()[$index] | lowercase
                 }}-icon.png"
              (click)="removeAbilityOneCost($index)"
              width="25"
              height="25" />
            }
          </div>
        </div>
      </div>

    </div>

    <!-- Ability Two -->
    <div
      class="collapse collapse-arrow px-4">
      <input type="checkbox" class="peer" />
      <div
        class="collapse-title text-xl font-medium">
        Ability Two
      </div>
      <div
        class="collapse-content bg-white/[0.33] rounded-md">
        <label class="label">
          <span class="label-text">Name</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #abilityTwoName
          [value]="store.abilityTwoName()"
          (input)="formFieldChange($event, 'abilityTwoName')" />

        <label class="label">
          <span class="label-text">Description</span>
        </label>
        <textarea
          class="textarea textarea-bordered w-full max-w-xs bg-input"
          #abilityTwoDescription
          [value]="store.abilityTwoDescription()"
          (input)="formFieldChange($event, 'abilityTwoDescription')"></textarea>

        <label class="label">
          <span class="label-text">Type</span>
        </label>
        <div
          class="flex flex-col h-fit w-full p-2 rounded-lg border-2 border-black border-solid bg-input">
          <div
            class="flex flex-row h-[65%] flex-wrap content-start">
            @for (cost of formService.abilityTypeCostOptions; track $index) {
            <img
              class="m-1.5 w-[25px] hover:cursor-pointer"
              ngSrc="assets/{{
                      formService.abilityTypeCostOptions[$index] | lowercase
                    }}-icon.png"
              (click)="addAbilityTwoCost(cost)"
              width="25"
              height="25" />
            }
            <div></div>
          </div>
          <div class="divider m-1"></div>
          <div
            class="flex h-[25px] p-1 flew-wrap items-center justify-start">
            <p>Cost:</p>
            @for (cost of store.abilityTwoCost(); track
            $index)
            {
            <img
              class="m-1.5 w-[25px] hover:cursor-pointer"
              ngSrc="assets/{{
                     store.abilityTwoCost()[$index] | lowercase
                   }}-icon.png"
              (click)="removeAbilityTwoCost($index)"
              width="25"
              height="25" />
            }
          </div>
        </div>
      </div>

    </div>

    <!-- Location, Work Environment, Availability -->
    <div
      class="collapse collapse-arrow px-4">
      <input type="checkbox" class="peer" />
      <div
        class="collapse-title text-xl font-medium">
        Location, Work Environment, Availability
      </div>
      <div
        class="collapse-content bg-white/[0.33] rounded-md">
        <label class="label">
          <span class="label-text">Location</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #location
          [value]="store.location()"
          (input)="formFieldChange($event, 'location')" />
        <label class="label">
          <span class="label-text">Work Environment</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #workEnvironment
          [value]="store.workEnvironment()"
          (input)="formFieldChange($event, 'workEnvironment')" />
        <label class="label">
          <span class="label-text">Availability</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #availability
          [value]="store.availability()"
          (input)="formFieldChange($event, 'availability')" />
      </div>
    </div>

    <!-- Card Infos -->
    <div
      class="collapse collapse-arrow px-4">
      <input type="checkbox" class="peer" />
      <div
        class="collapse-title text-xl font-medium">
        Bottom Card Infos
      </div>
      <div
        class="collapse-content bg-white/[0.33] rounded-md">
        <label class="label">
          <span class="label-text">Upper Text</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #upperText
          [value]="store.upperText()"
          (input)="formFieldChange($event, 'upperText')" />
        <label class="label">
          <span class="label-text">Lower Text</span>
        </label>
        <textarea type="text"
          class="textarea w-full max-w-xs bg-input" #lowerText
          [value]="store.lowerText()"
          (input)="formFieldChange($event, 'lowerText')"></textarea>
        <label class="label">
          <span class="label-text">Illustrator</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #illustrator
          [value]="store.illustrator()"
          (input)="formFieldChange($event, 'illustrator')" />
        <label class="label">
          <span class="label-text">Company</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #company
          [value]="store.company()"
          (input)="formFieldChange($event, 'company')" />
        <label class="label">
          <span class="label-text">Card Number</span>
        </label>
        <input type="text"
          class="input input-bordered w-full max-w-xs bg-input" #cardNumber
          [value]="store.cardNumber()"
          (input)="formFieldChange($event, 'cardNumber')" />
      </div>

    </div>
  </div>
  <pokemon-card-maker-download-card />
</div>
